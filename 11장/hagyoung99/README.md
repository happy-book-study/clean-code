# 11장
## 도시를 세운다면?
- 프로그램은 적절한 추상화와 모듈화로 돌아간다.
## 시스템 제작과 시스템 사용을 분리하라.
- 제작과 사용은 다르다.
- 시작 단계에서 필요한 것은 **관심사 분리**
- 초기화 지연 기법을 사용할 때는 단일 책임원칙을 지키고 있는지 확인해라.
### Main 분리
- 시스템 생성과 시스템 사용을 분리하는 방법
- 관련된 코드를 main이나 main이 호출하는 모듈로 이동 후 main에서 필요 객체를 생성해 애플리케이션에 넘긴다.
### 팩토리
- 객체가 생성되는 시점을 애플리케이션이 결정해야할 경우 ABSTRACT FACTORY 패턴을 사용한다.
### 의존성 주입
- 사용과 제작을 분리하는 메커니즘 중 하나는 의존성 주입이다.
    - 의존성 주입이란 제어역전 기법을 의존성 관리에 적용한 메커니즘
- 제어 역전에서는 한 객체가 맡은 보조 책임을 새로운 객체에게 전적으로 넘긴다.
- 새로운 객체는 넘겨받은 책임만 맡게되어 단일책임 원칙을 지킬 수 있다.
- 진정한 의존성 주입은 클래스가 의존성을 해결하려 시도하지 않고, 의존성을 주입하는 방법으로 setter 나 생성자 인수를 제공한다.

## 확장
- '처음부터 올바르게' 시스템을 만들 수 있다는 믿음은 미신이다.
- 시스템은 계속해서 변경되가고, 변경된 내용에 맞춰 시스템을 구현해야한다.
- 이때 TDD나 리팩터링 등을 통해 만들어진 깨끗한 코드는 시스템을 조정하고 확장하기 쉽게 만들어준다.
### 횡단 관심사
- 영속성과 같은 관심사는 애플리케이션에서 객체 경계를 넘나드는 경향이 있는데 이때 객체가 전반적으로 동일한 방식을 이용하게 만들어야한다.
    - ex) 특정 DBMS나 독자적인 파일을 사용하고, 테이블과 열은 같은 명명 관례를 따르며, 트랜잭션의 의미가 일관적인것

## 자바 프록시
- 개별 객체나 클래스에서 메서드 호출을 감싸는 경우가 사용하기 좋은 상황이다.
- 하지만 프록시를 사용하면 깨끗한 코드를 작성하기 어려워진다.

## 순수 자바 AOP 프레임 워크
- 대부분의 프록시 코드는 판박이라 도구로 자동화 할 수 있다.
- 스프링의 경우 비즈니스 논리를 POJO로 구현하고, POJO는 순수하게 도메인에 초점을 맞춰 엔터프라이즈 프레임워크에 의존하지 않는다.
